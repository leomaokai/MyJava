索引的出现是为了提高数据查询效率,就像书的目录一样

索引是排好序的快速查找数据结构

# 索引的常见模型

**哈希表**是一种以键值对存储数据的结构

解决哈希冲突的一种方法是拉出一个链表

哈希表中记录不是有序的,在做区间查询的速度是很慢的,所以,哈希表这种结构适用于等值查询的场景

而**有序数组**在等值查询的范围查询场景中的性能非常优秀,但是插入记录成本很高,所以有序数组索引只适用于静态存储引擎

**二叉树**:每个节点的左儿子小于双亲,双亲小于右儿子,查询时间复杂度为O(log(N)),但是为了维持查询复杂度,需要保持这个课是平衡二叉树,更新时间复杂度也是O(log(N))

为了让一个查询尽量少的读磁盘,就必须让查询过程访问尽量少的数据块,这就需要使用"N叉"树

**`InnoDB`的索引模型:**

在`InonoDB`中,表都是根据主键顺序以索引的形式存放的,这种存储方式的表称为索引组织表

每一个索引在`InnoDB`里面对应一棵B+树

主键索引的叶子节点存放的是整行数据

非主键索引的叶子节点内容是主键的值,主键长度越小,普通索引的叶子节点就越小,普通索引占用的空间也就越小

所以当使用非主键索引时,需要多查询扫描一棵索引树,所以应该尽量使用主键查询

**索引维护**

B+树为了维护索引的有序性,在插入新值时需要做必要的维护,尤其是在中间插入时,会大大降低效率,当数据页满时,会出现页分裂情况,影响数据页的利用率

自增主键是指自增列上定义主键,在建表语句中一般这么定义`NOT NULL PRIMARY KEY AUTO_INCREMENT`

自增主键插入数据模式,每次插入一条新纪录,都是追加操作,不涉及挪动其它记录,也不会触发叶子节点的分裂 